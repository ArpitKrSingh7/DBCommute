{"ast":null,"code":"var _jsxFileName = \"/home/arpit/Parent/Voice-based-Transport-Enquiry-System/voiceenquirysystem/src/Components/Welcome/Welcome.js\";\nimport React, { Component } from 'react';\nimport tachyons from 'tachyons';\nimport './Welcome.css';\nimport { Calendar } from 'primereact/calendar';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport { AutoComplete } from 'primereact/autocomplete';\nimport App from '../VoiceResolver/App';\nconst def_state = {\n  'to': {\n    'value': '',\n    'label': '',\n    'link': ''\n  }\n};\n\nclass Welcome extends Component {\n  constructor(props) {\n    super(props);\n\n    this.speak = xyz => {\n      // Check if speaking\n      console.log(this.state);\n      const synth = window.speechSynthesis;\n\n      if (synth.speaking) {\n        console.error('Already speaking...');\n        return;\n      } // Get speak text\n\n\n      const speakText = new SpeechSynthesisUtterance(xyz); // Speak end\n\n      speakText.onend = e => {\n        console.log('Done speaking...');\n      }; // Speak error\n\n\n      speakText.onerror = e => {\n        console.error('Something went wrong');\n      }; // Speak\n\n\n      synth.speak(speakText);\n    };\n\n    this.handleRegister = event => {\n      event.preventDefault(); // this.props.onRouteChange('home');\n\n      console.log(this.state); //this.props.RouteChanger('search',this.state.fromSelect,this.state.toSelect)\n\n      this.props.SetTravelDate(this.state.onwarddate);\n      fetch('http://localhost:3001/CheckRoute', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          fromSelect: this.state.fromSelect,\n          toSelect: this.state.toSelect\n        })\n      }).then(res => res.json()).then(data => {\n        this.setState({\n          response: JSON.parse(data)\n        });\n      }).then(x => {\n        if (this.state.response.error === '') {\n          this.props.setPlaces(this.state.fromSelect, this.state.toSelect);\n          alert(this.state.response.response);\n          this.props.Reset();\n\n          if (this.props.sbus === true) {\n            for (var i = 0; i < this.state.response.response.length; i++) {\n              this.props.SetRouteId(this.state.response.response[i], 1);\n            }\n\n            this.props.onRouteChange('search');\n          } else {\n            this.props.onRouteChange('locate');\n          }\n        } else {\n          alert(\"No such route exists\" + JSON.stringify(this.state.response));\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleChange1 = selectedOption => {\n      this.setState(def_state);\n      this.setState({\n        from: selectedOption\n      }, () => {\n        document.getElementById('from').value = this.state.from.label;\n        document.getElementById('to').value = this.state.to.label;\n      });\n    };\n\n    this.handleChange2 = selectedOption => {\n      this.setState({\n        to: selectedOption\n      }, () => {\n        document.getElementById('to').value = this.state.to.label;\n      });\n    };\n\n    let today = new Date();\n    let month = today.getMonth();\n    let year = today.getFullYear();\n    let prevMonth = month === 0 ? 11 : month - 1;\n    let prevYear = prevMonth === 11 ? year - 1 : year;\n    let nextMonth = month === 11 ? 0 : month + 1;\n    let nextYear = nextMonth === 0 ? year + 1 : year;\n    let minDate = new Date();\n    minDate.setMonth(prevMonth + 1);\n    minDate.setFullYear(prevYear);\n    let maxDate = new Date();\n    maxDate.setMonth(nextMonth);\n    maxDate.setFullYear(year);\n    this.state = {\n      minDate: minDate,\n      maxDate: maxDate,\n      onwarddate: '',\n      fromSelect: '',\n      toSelect: '',\n      countriesData: [],\n      Stops: [],\n      filteredFrom: [],\n      filteredTo: []\n    };\n    this.filterFromPlace = this.filterFromPlace.bind(this);\n    this.filterToPlace = this.filterToPlace.bind(this);\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3001/BusStops').then(res => res.json()).then(data => {\n      this.setState({\n        Stops: JSON.parse(data)\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(this.state.minDate);\n  }\n\n  filterFromPlace(event) {\n    setTimeout(() => {\n      var results = this.state.Stops.filter(place => {\n        return place.toLowerCase().startsWith(event.query.toLowerCase());\n      });\n      this.setState({\n        filteredFrom: results\n      });\n    }, 250);\n    console.log(this.state);\n  }\n\n  filterToPlace(event) {\n    setTimeout(() => {\n      var results = this.state.Stops.filter(place => {\n        return place.toLowerCase().startsWith(event.query.toLowerCase());\n      });\n      var results = results.filter(r => {\n        return r.toLowerCase() != this.state.fromSelect.toLowerCase();\n      });\n      this.setState({\n        filteredTo: results\n      });\n    }, 250);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"formwarp pa2 shadow-2 center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wraap pa2 center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group col-md-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"onwarddate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Pick a Date: \"), React.createElement(Calendar, {\n      dateFormat: \"dd/mm/yy\",\n      value: this.state.onwarddate,\n      minDate: this.state.minDate,\n      maxDate: this.state.maxDate,\n      onChange: e => this.setState({\n        onwarddate: e.value\n      }),\n      showIcon: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group col-md-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"from\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Source Place:\"), React.createElement(AutoComplete, {\n      style: {\n        background: \"#000000\"\n      },\n      value: this.state.fromSelect,\n      suggestions: this.state.filteredFrom,\n      completeMethod: this.filterFromPlace,\n      size: 30,\n      placeholder: \"From Place\",\n      minLength: 1,\n      onChange: e => this.setState({\n        fromSelect: e.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    })), React.createElement(App, {\n      id: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group col-md-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"to\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Destination\"), React.createElement(AutoComplete, {\n      style: {\n        background: \"#000000\"\n      },\n      value: this.state.toSelect,\n      suggestions: this.state.filteredTo,\n      completeMethod: this.filterToPlace,\n      size: 30,\n      placeholder: \"To Place\",\n      minLength: 1,\n      onChange: e => this.setState({\n        toSelect: e.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    })), React.createElement(App, {\n      id: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group col-md-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Search Buses\",\n      style: {\n        marginLeft: '20px'\n      },\n      onClick: this.handleRegister,\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default Welcome;","map":{"version":3,"sources":["/home/arpit/Parent/Voice-based-Transport-Enquiry-System/voiceenquirysystem/src/Components/Welcome/Welcome.js"],"names":["React","Component","tachyons","Calendar","AutoComplete","App","def_state","Welcome","constructor","props","speak","xyz","console","log","state","synth","window","speechSynthesis","speaking","error","speakText","SpeechSynthesisUtterance","onend","e","onerror","handleRegister","event","preventDefault","SetTravelDate","onwarddate","fetch","method","headers","body","JSON","stringify","fromSelect","toSelect","then","res","json","data","setState","response","parse","x","setPlaces","alert","Reset","sbus","i","length","SetRouteId","onRouteChange","catch","err","handleChange1","selectedOption","from","document","getElementById","value","label","to","handleChange2","today","Date","month","getMonth","year","getFullYear","prevMonth","prevYear","nextMonth","nextYear","minDate","setMonth","setFullYear","maxDate","countriesData","Stops","filteredFrom","filteredTo","filterFromPlace","bind","filterToPlace","componentDidMount","setTimeout","results","filter","place","toLowerCase","startsWith","query","r","render","background","marginLeft"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAO,eAAP;AACA,SAAQC,QAAR,QAAuB,qBAAvB;AACA,OAAO,kDAAP;AACA,OAAO,yCAAP;AACA,OAAO,2BAAP;AACA,SAAQC,YAAR,QAA2B,yBAA3B;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AAEA,MAAMC,SAAS,GAAG;AAAC,QAAM;AAAC,aAAQ,EAAT;AAAY,aAAQ,EAApB;AAAuB,YAAO;AAA9B;AAAP,CAAlB;;AAEA,MAAMC,OAAN,SAAsBN,SAAtB,CACA;AAECO,EAAAA,WAAW,CAACC,KAAD,EACX;AACO,UAAMA,KAAN;;AADP,SAmCGC,KAnCH,GAmCYC,GAAD,IAAS;AACf;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB;AACA,YAAMC,KAAK,GAAGC,MAAM,CAACC,eAArB;;AACA,UAAIF,KAAK,CAACG,QAAV,EAAoB;AAClBN,QAAAA,OAAO,CAACO,KAAR,CAAc,qBAAd;AACA;AACD,OAPc,CASb;;;AACA,YAAMC,SAAS,GAAG,IAAIC,wBAAJ,CAA6BV,GAA7B,CAAlB,CAVa,CAYb;;AACAS,MAAAA,SAAS,CAACE,KAAV,GAAkBC,CAAC,IAAI;AACrBX,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AAED,OAHD,CAba,CAkBb;;;AACAO,MAAAA,SAAS,CAACI,OAAV,GAAoBD,CAAC,IAAI;AACvBX,QAAAA,OAAO,CAACO,KAAR,CAAc,sBAAd;AACD,OAFD,CAnBa,CAuBb;;;AACAJ,MAAAA,KAAK,CAACL,KAAN,CAAYU,SAAZ;AAEH,KA7DJ;;AAAA,SAiGAK,cAjGA,GAiGkBC,KAAD,IAAW;AAC3BA,MAAAA,KAAK,CAACC,cAAN,GAD2B,CAErB;;AAEAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB,EAJqB,CAKrB;;AAEA,WAAKL,KAAL,CAAWmB,aAAX,CAAyB,KAAKd,KAAL,CAAWe,UAApC;AAENC,MAAAA,KAAK,CAAC,kCAAD,EAAoC;AACvCC,QAAAA,MAAM,EAAC,MADgC;AAEvCC,QAAAA,OAAO,EAAC;AAAC,0BAAe;AAAhB,SAF+B;AAGvCC,QAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AACZC,UAAAA,UAAU,EAAC,KAAKtB,KAAL,CAAWsB,UADV;AAEZC,UAAAA,QAAQ,EAAC,KAAKvB,KAAL,CAAWuB;AAFR,SAAf;AAHkC,OAApC,CAAL,CAOKC,IAPL,CAOUC,GAAG,IAAGA,GAAG,CAACC,IAAJ,EAPhB,EAQGF,IARH,CAQQG,IAAI,IAAE;AAAC,aAAKC,QAAL,CAAc;AAACC,UAAAA,QAAQ,EAACT,IAAI,CAACU,KAAL,CAAWH,IAAX;AAAV,SAAd;AAA2C,OAR1D,EASGH,IATH,CASQO,CAAC,IAAE;AACR,YAAG,KAAK/B,KAAL,CAAW6B,QAAX,CAAoBxB,KAApB,KAA4B,EAA/B,EACD;AACQ,eAAKV,KAAL,CAAWqC,SAAX,CAAqB,KAAKhC,KAAL,CAAWsB,UAAhC,EAA2C,KAAKtB,KAAL,CAAWuB,QAAtD;AACPU,UAAAA,KAAK,CAAC,KAAKjC,KAAL,CAAW6B,QAAX,CAAoBA,QAArB,CAAL;AAEO,eAAKlC,KAAL,CAAWuC,KAAX;;AACE,cAAG,KAAKvC,KAAL,CAAWwC,IAAX,KAAkB,IAArB,EACC;AAEC,iBAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKpC,KAAL,CAAW6B,QAAX,CAAoBA,QAApB,CAA6BQ,MAA3C,EAAkDD,CAAC,EAAnD,EACA;AACI,mBAAKzC,KAAL,CAAW2C,UAAX,CAAsB,KAAKtC,KAAL,CAAW6B,QAAX,CAAoBA,QAApB,CAA6BO,CAA7B,CAAtB,EAAsD,CAAtD;AACH;;AACG,iBAAKzC,KAAL,CAAW4C,aAAX,CAAyB,QAAzB;AACH,WARH,MAUF;AACI,iBAAK5C,KAAL,CAAW4C,aAAX,CAAyB,QAAzB;AACH;AACF,SAnBN,MAqBK;AACJN,UAAAA,KAAK,CAAC,yBAAuBb,IAAI,CAACC,SAAL,CAAe,KAAKrB,KAAL,CAAW6B,QAA1B,CAAxB,CAAL;AACG;AAAE,OAjCT,EAkCOW,KAlCP,CAkCcC,GAAD,IAAO;AAAC3C,QAAAA,OAAO,CAACC,GAAR,CAAY0C,GAAZ;AAAiB,OAlCtC;AAmCA,KA7ID;;AAAA,SAgJGC,aAhJH,GAgJoBC,cAAD,IAAoB;AAClC,WAAKf,QAAL,CAAcpC,SAAd;AACA,WAAKoC,QAAL,CAAc;AAACgB,QAAAA,IAAI,EAACD;AAAN,OAAd,EAAoC,MAAM;AAC1CE,QAAAA,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,KAAhC,GAAsC,KAAK/C,KAAL,CAAW4C,IAAX,CAAgBI,KAAtD;AACAH,QAAAA,QAAQ,CAACC,cAAT,CAAwB,IAAxB,EAA8BC,KAA9B,GAAoC,KAAK/C,KAAL,CAAWiD,EAAX,CAAcD,KAAlD;AACC,OAHD;AAGK,KArJV;;AAAA,SAuJGE,aAvJH,GAuJoBP,cAAD,IAAoB;AAClC,WAAKf,QAAL,CAAc;AAACqB,QAAAA,EAAE,EAAEN;AAAL,OAAd,EAAmC,MAAM;AACzCE,QAAAA,QAAQ,CAACC,cAAT,CAAwB,IAAxB,EAA8BC,KAA9B,GAAoC,KAAK/C,KAAL,CAAWiD,EAAX,CAAcD,KAAlD;AACG,OAFH;AAEM,KA1JX;;AAGO,QAAIG,KAAK,GAAG,IAAIC,IAAJ,EAAZ;AACN,QAAIC,KAAK,GAAGF,KAAK,CAACG,QAAN,EAAZ;AACA,QAAIC,IAAI,GAAGJ,KAAK,CAACK,WAAN,EAAX;AACA,QAAIC,SAAS,GAAGJ,KAAK,KAAK,CAAV,GAAc,EAAd,GAAmBA,KAAK,GAAG,CAA3C;AACA,QAAIK,QAAQ,GAAGD,SAAS,KAAK,EAAd,GAAmBF,IAAI,GAAG,CAA1B,GAA8BA,IAA7C;AACA,QAAII,SAAS,GAAGN,KAAK,KAAK,EAAV,GAAe,CAAf,GAAmBA,KAAK,GAAG,CAA3C;AACA,QAAIO,QAAQ,GAAGD,SAAS,KAAK,CAAd,GAAkBJ,IAAI,GAAG,CAAzB,GAA6BA,IAA5C;AAEA,QAAIM,OAAO,GAAG,IAAIT,IAAJ,EAAd;AACAS,IAAAA,OAAO,CAACC,QAAR,CAAiBL,SAAS,GAAC,CAA3B;AACMI,IAAAA,OAAO,CAACE,WAAR,CAAoBL,QAApB;AAEN,QAAIM,OAAO,GAAG,IAAIZ,IAAJ,EAAd;AACAY,IAAAA,OAAO,CAACF,QAAR,CAAiBH,SAAjB;AACMK,IAAAA,OAAO,CAACD,WAAR,CAAoBR,IAApB;AAEN,SAAKvD,KAAL,GACE;AACQ6D,MAAAA,OAAO,EAACA,OADhB;AAEQG,MAAAA,OAAO,EAACA,OAFhB;AAGDjD,MAAAA,UAAU,EAAC,EAHV;AAIDO,MAAAA,UAAU,EAAC,EAJV;AAKQC,MAAAA,QAAQ,EAAC,EALjB;AAMQ0C,MAAAA,aAAa,EAAE,EANvB;AAOQC,MAAAA,KAAK,EAAC,EAPd;AAQQC,MAAAA,YAAY,EAAE,EARtB;AASQC,MAAAA,UAAU,EAAE;AATpB,KADF;AAYG,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAArB;AACA;;AA8BDE,EAAAA,iBAAiB,GAAG;AAChBxD,IAAAA,KAAK,CAAC,gCAAD,CAAL,CAAwCQ,IAAxC,CAA6CC,GAAG,IAAGA,GAAG,CAACC,IAAJ,EAAnD,EACCF,IADD,CACMG,IAAI,IAAE;AAAC,WAAKC,QAAL,CAAc;AAACsC,QAAAA,KAAK,EAAC9C,IAAI,CAACU,KAAL,CAAWH,IAAX;AAAP,OAAd;AAAwC,KADrD,EAECa,KAFD,CAEQC,GAAD,IAAO;AAAC3C,MAAAA,OAAO,CAACC,GAAR,CAAY0C,GAAZ;AAAkB,KAFjC;AAGA3C,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAW6D,OAAvB;AACH;;AAEDQ,EAAAA,eAAe,CAACzD,KAAD,EAAQ;AACnB6D,IAAAA,UAAU,CAAC,MAAM;AAEb,UAAIC,OAAO,GAAG,KAAK1E,KAAL,CAAWkE,KAAX,CAAiBS,MAAjB,CAAyBC,KAAD,IAAW;AAC7C,eAAOA,KAAK,CAACC,WAAN,GAAoBC,UAApB,CAA+BlE,KAAK,CAACmE,KAAN,CAAYF,WAAZ,EAA/B,CAAP;AACH,OAFa,CAAd;AAIA,WAAKjD,QAAL,CAAc;AAAEuC,QAAAA,YAAY,EAAEO;AAAhB,OAAd;AAEH,KARS,EAQP,GARO,CAAV;AASA5E,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB;AACH;;AAEDuE,EAAAA,aAAa,CAAC3D,KAAD,EAAQ;AACjB6D,IAAAA,UAAU,CAAC,MAAM;AAEb,UAAIC,OAAO,GAAG,KAAK1E,KAAL,CAAWkE,KAAX,CAAiBS,MAAjB,CAAyBC,KAAD,IAAW;AAC7C,eAAOA,KAAK,CAACC,WAAN,GAAoBC,UAApB,CAA+BlE,KAAK,CAACmE,KAAN,CAAYF,WAAZ,EAA/B,CAAP;AACH,OAFa,CAAd;AAGA,UAAIH,OAAO,GAAEA,OAAO,CAACC,MAAR,CAAgBK,CAAD,IAAK;AAAC,eAAOA,CAAC,CAACH,WAAF,MAAiB,KAAK7E,KAAL,CAAWsB,UAAX,CAAsBuD,WAAtB,EAAxB;AAA4D,OAAjF,CAAb;AAEA,WAAKjD,QAAL,CAAc;AAAEwC,QAAAA,UAAU,EAAEM;AAAd,OAAd;AACH,KARS,EAQP,GARO,CAAV;AASH;;AA+DJO,EAAAA,MAAM,GACN;AAED,WAEI;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAO,MAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADH,EAEe,oBAAC,QAAD;AACI,MAAA,UAAU,EAAC,UADf;AAEI,MAAA,KAAK,EAAE,KAAKjF,KAAL,CAAWe,UAFtB;AAGI,MAAA,OAAO,EAAE,KAAKf,KAAL,CAAW6D,OAHxB;AAIjB,MAAA,OAAO,EAAE,KAAK7D,KAAL,CAAWgE,OAJH;AAKI,MAAA,QAAQ,EAAGvD,CAAD,IAAO,KAAKmB,QAAL,CAAc;AAACb,QAAAA,UAAU,EAAEN,CAAC,CAACsC;AAAf,OAAd,CALrB;AAMI,MAAA,QAAQ,EAAE,IANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFf,CADH,EAYE;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM;AAAO,MAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADN,EAG0B,oBAAC,YAAD;AAAc,MAAA,KAAK,EAAE;AAACmC,QAAAA,UAAU,EAAC;AAAZ,OAArB;AACc,MAAA,KAAK,EAAE,KAAKlF,KAAL,CAAWsB,UADhC;AAEc,MAAA,WAAW,EAAE,KAAKtB,KAAL,CAAWmE,YAFtC;AAGc,MAAA,cAAc,EAAE,KAAKE,eAHnC;AAIc,MAAA,IAAI,EAAE,EAJpB;AAKc,MAAA,WAAW,EAAC,YAL1B;AAMc,MAAA,SAAS,EAAE,CANzB;AAOc,MAAA,QAAQ,EAAG5D,CAAD,IAAO,KAAKmB,QAAL,CAAc;AAACN,QAAAA,UAAU,EAAEb,CAAC,CAACsC;AAAf,OAAd,CAP/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAH1B,CAZF,EAwBc,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxBd,EA2BG;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM;AAAO,MAAA,OAAO,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADN,EAGkB,oBAAC,YAAD;AAAc,MAAA,KAAK,EAAE;AAACmC,QAAAA,UAAU,EAAC;AAAZ,OAArB;AACqB,MAAA,KAAK,EAAE,KAAKlF,KAAL,CAAWuB,QADvC;AAEqB,MAAA,WAAW,EAAE,KAAKvB,KAAL,CAAWoE,UAF7C;AAGqB,MAAA,cAAc,EAAE,KAAKG,aAH1C;AAIqB,MAAA,IAAI,EAAE,EAJ3B;AAKqB,MAAA,WAAW,EAAC,UALjC;AAMqB,MAAA,SAAS,EAAE,CANhC;AAOqB,MAAA,QAAQ,EAAG9D,CAAD,IAAO,KAAKmB,QAAL,CAAc;AAACL,QAAAA,QAAQ,EAAEd,CAAC,CAACsC;AAAb,OAAd,CAPtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHlB,CA3BH,EAwCc,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxCd,EA2CG;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,cAA3B;AAA0C,MAAA,KAAK,EAAE;AAACoC,QAAAA,UAAU,EAAC;AAAZ,OAAjD;AAAsE,MAAA,OAAO,EAAE,KAAKxE,cAApF;AAAoG,MAAA,SAAS,EAAC,iBAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,CA3CH,CADF,CAFA,CAFJ;AA6DE;;AA/NF;;AAkOA,eAAelB,OAAf","sourcesContent":["import React,{Component} from 'react';\nimport tachyons from 'tachyons';\nimport './Welcome.css';\nimport {Calendar} from 'primereact/calendar';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport {AutoComplete} from 'primereact/autocomplete';\nimport App from '../VoiceResolver/App';\n\nconst def_state = {'to': {'value':'','label':'','link':''}}\n\nclass Welcome extends Component\n{\n\n\tconstructor(props)\n\t{\n        super(props);\n        \n        let today = new Date();\n\t\tlet month = today.getMonth();\n\t\tlet year = today.getFullYear();\n\t\tlet prevMonth = month === 0 ? 11 : month - 1;\n\t\tlet prevYear = prevMonth === 11 ? year - 1 : year;\n\t\tlet nextMonth = month === 11 ? 0 : month + 1;\n\t\tlet nextYear = nextMonth === 0 ? year + 1 : year;\n\n\t\tlet minDate = new Date();\n\t\tminDate.setMonth(prevMonth+1);\n        minDate.setFullYear(prevYear);\n        \n\t\tlet maxDate = new Date();\n\t\tmaxDate.setMonth(nextMonth);\n        maxDate.setFullYear(year);\n        \n\t\tthis.state=\n    {\n            minDate:minDate,\n            maxDate:maxDate,\n\t\t\tonwarddate:'',\n\t\t\tfromSelect:'',\n            toSelect:'',\n            countriesData: [],\n            Stops:[],\n            filteredFrom: [] ,\n            filteredTo: [] ,\n   }\n     this.filterFromPlace = this.filterFromPlace.bind(this);\n     this.filterToPlace = this.filterToPlace.bind(this);\n    }\n    \n    speak = (xyz) => {\n      // Check if speaking\n      console.log(this.state);\n      const synth = window.speechSynthesis;\n      if (synth.speaking) {\n        console.error('Already speaking...');\n        return;\n      }\n        \n        // Get speak text\n        const speakText = new SpeechSynthesisUtterance(xyz);\n\n        // Speak end\n        speakText.onend = e => {\n          console.log('Done speaking...');\n\n        };\n\n        // Speak error\n        speakText.onerror = e => {\n          console.error('Something went wrong');\n        };\n\n        // Speak\n        synth.speak(speakText);\n      \n    };\n\n    componentDidMount() {\n        fetch('http://localhost:3001/BusStops').then(res=> res.json())\n        .then(data=>{this.setState({Stops:JSON.parse(data)})})\n        .catch((err)=>{console.log(err);})\n        console.log(this.state.minDate);\n    }\n\n    filterFromPlace(event) {\n        setTimeout(() => {\n            \n            var results = this.state.Stops.filter((place) => {\n                return place.toLowerCase().startsWith(event.query.toLowerCase());\n            });\n            \n            this.setState({ filteredFrom: results });\n            \n        }, 250);\n        console.log(this.state);\n    }\n\n    filterToPlace(event) {\n        setTimeout(() => {\n            \n            var results = this.state.Stops.filter((place) => {\n                return place.toLowerCase().startsWith(event.query.toLowerCase());\n            });\n            var results= results.filter((r)=>{return r.toLowerCase()!=this.state.fromSelect.toLowerCase()}) \n            \n            this.setState({ filteredTo: results });\n        }, 250);\n    }\n    \n\n\n\thandleRegister = (event) => {\n\t\tevent.preventDefault();\n        // this.props.onRouteChange('home');\n       \n        console.log(this.state);\n        //this.props.RouteChanger('search',this.state.fromSelect,this.state.toSelect)\n\n        this.props.SetTravelDate(this.state.onwarddate);\n\n\t\tfetch('http://localhost:3001/CheckRoute',{\n\t\t  method:'post',\n\t\t  headers:{'Content-Type':'application/json'},\n\t\t  body:JSON.stringify({\n            fromSelect:this.state.fromSelect,\n            toSelect:this.state.toSelect\n            })\n\t\t  }).then(res=> res.json())\n\t\t  .then(data=>{this.setState({response:JSON.parse(data)})})\n\t\t  .then(x=>{\n\t\t   if(this.state.response.error==='')\n\t\t  { \n            this.props.setPlaces(this.state.fromSelect,this.state.toSelect)\n\t\t   alert(this.state.response.response);\n           \n            this.props.Reset();\n              if(this.props.sbus===true)\n               {\n\n                for(var i=0;i<this.state.response.response.length;i++)\n                {\n                    this.props.SetRouteId(this.state.response.response[i],1)   \n                }\n                    this.props.onRouteChange('search')\n                }\n            else\n            {   \n                this.props.onRouteChange('locate')\n            } \n          }\n          else\n          {\n\t\t    alert(\"No such route exists\"+JSON.stringify(this.state.response));\n        } })\n        .catch((err)=>{console.log(err)})\n\t}\n\n\n    handleChange1 = (selectedOption) => {\n      this.setState(def_state);\n      this.setState({from:selectedOption},() => {\n      document.getElementById('from').value=this.state.from.label;\n      document.getElementById('to').value=this.state.to.label;\n      })  };\n\n    handleChange2 = (selectedOption) => {\n      this.setState({to: selectedOption},() => {\n      document.getElementById('to').value=this.state.to.label; \n        }) }\n\n\trender()\n\t{\n\nreturn (\n\n    <div className='formwarp pa2 shadow-2 center'>        \n\n    <form>\n    \t\t<div className='wraap pa2 center'>\n    \t\t\t  <div className=\"form-group col-md-10\">\n    \t\t\t\t    <label htmlFor=\"onwarddate\">Pick a Date: </label>\n                        <Calendar \n                            dateFormat=\"dd/mm/yy\" \n                            value={this.state.onwarddate} \n                            minDate={this.state.minDate}\n\t\t\t\t\t\t\tmaxDate={this.state.maxDate}\n                            onChange={(e) => this.setState({onwarddate: e.value})} \n                            showIcon={true} />\n    \t\t\t  </div>\n    \t\t\t{/**/} \n    \t\t\t <div className=\"form-group col-md-10\">\n    \t\t\t \t     <label htmlFor=\"from\">Source Place:</label>\n \n                                  <AutoComplete style={{background:\"#000000\"}}\n                                                value={this.state.fromSelect} \n                                                suggestions={this.state.filteredFrom} \n                                                completeMethod={this.filterFromPlace}                                    \n                                                size={30}\n                                                placeholder=\"From Place\" \n                                                minLength={1} \n                                                onChange={(e) => this.setState({fromSelect: e.value})} />\n    \t\t\t </div>\n                    <App id={1}/>\n\n\n    \t\t\t  <div className=\"form-group col-md-10\">\n    \t\t\t      \t <label htmlFor=\"to\">Destination</label>\n    \t\t\t\t\t\t\n                           <AutoComplete style={{background:\"#000000\"}}\n                                                value={this.state.toSelect} \n                                                suggestions={this.state.filteredTo} \n                                                completeMethod={this.filterToPlace}                                    \n                                                size={30}\n                                                placeholder=\"To Place\" \n                                                minLength={1} \n                                                onChange={(e) => this.setState({toSelect: e.value})} />\n\n    \t\t\t  </div>\n                    <App id={2}/>\n\n\n    \t\t\t  <div className=\"form-group col-md-10\">\n    \t\t\t  \n    \t\t\t  <input type='submit' value='Search Buses' style={{marginLeft:'20px'}} onClick={this.handleRegister} className=\"btn btn-primary\"/>\n    \t\t\t  \n    \t\t\t  \n    \t\t\t  </div>\n\n    \t\t</div>\n    </form>\n    </div>\n\n\n\t\t\t);\n\t}\n}\n\nexport default Welcome;"]},"metadata":{},"sourceType":"module"}