{"ast":null,"code":"var _jsxFileName = \"/home/arpit/Project_DBMS/Voice-based-Transport-Enquiry-System/voiceenquirysystem/src/Components/Seat/Seat.js\";\nimport React, { Component } from 'react';\nimport tachyons from 'tachyons';\nimport './Seat.css';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport { ScrollPanel } from 'primereact/scrollpanel';\nimport SeatRow from './SeatRow/SeatRow';\n\nclass Seat extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleBooking1 = () => {\n      this.handleBooking();\n    };\n\n    this.handleBooking = event => {\n      console.log(this.state);\n\n      if (this.state.seatsbooked.length == 0) {\n        alert(\"Book seat to continue\");\n      } else {\n        fetch('http://localhost:3001/Tickets', {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            traveldate: this.props.seldate,\n            busregnno: this.props.bus.BusRegnNo,\n            seatsbooked: this.state.seatsbooked,\n            starttime: this.props.bus.StartTime,\n            routeid: this.props.bus.RouteID,\n            driverid: this.props.bus.DriverID\n          })\n        }).then(res => res.json()).then(data => {\n          this.setState({\n            response: JSON.parse(data)\n          }, function () {\n            console.log(this.state);\n            console.log(\"NOOO\");\n          });\n        }).then(x => {\n          if (this.state.response.error === null) {\n            this.props.setPNR(this.state.response.pnr);\n            this.props.setbooked(this.state.seatsbooked);\n            fetch('http://localhost:3001/SeatsBooking', {\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                pnr: this.state.response.pnr,\n                traveldate: this.props.seldate,\n                busregnno: this.props.bus.BusRegnNo,\n                seatsbooked: this.state.seatsbooked,\n                starttime: this.props.bus.StartTime,\n                routeid: this.props.bus.RouteID,\n                driverid: this.props.bus.DriverID\n              })\n            }).then(res => res.json()).then(data => {\n              this.setState({\n                response2: JSON.parse(data)\n              });\n            }).then(x => {\n              if (this.state.response2.error === null) {\n                console.log(\"Entered into SeatsBooked\");\n                fetch('http://localhost:3001/Through', {\n                  method: 'post',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    pnr: this.state.response.pnr,\n                    traveldate: this.props.seldate,\n                    busregnno: this.props.bus.BusRegnNo,\n                    seatsbooked: this.state.seatsbooked,\n                    starttime: this.props.bus.StartTime,\n                    routeid: this.props.bus.RouteID,\n                    driverid: this.props.bus.DriverID\n                  })\n                }).then(res => res.json()).then(data => {\n                  this.setState({\n                    response3: JSON.parse(data)\n                  });\n                }).then(x => {\n                  if (this.state.response3.error === null) {\n                    console.log(\"Entered into Through\");\n                    alert(\"Succesfully Booked!!!\");\n                    this.props.onRouteChange('testing');\n                  } else alert(\"Error inserting. Please follow all restrictions:\" + JSON.stringify(this.state.response.error));\n                });\n              } else alert(\"Error inserting. Please follow all restrictions:\" + JSON.stringify(this.state.response.error));\n            });\n          } else alert(\"Error inserting. Please follow all restrictions:\" + JSON.stringify(this.state.response.error));\n        });\n      }\n    };\n\n    this.pay = (text, op) => {\n      text = text.toString(10);\n      let ul = document.getElementById('mylist');\n\n      if (op === '1') {\n        let li = document.createElement('li');\n        li.appendChild(document.createTextNode(text));\n        this.state.seatsbooked.includes(parseInt(text)) ? console.log(\"1\") : this.state.seatsbooked.push(parseInt(text));\n        ul.appendChild(li);\n      } else {\n        for (var x = 0; x < ul.childNodes.length; x++) {\n          if (ul.childNodes[x].textContent === text) {\n            ul.removeChild(ul.childNodes[x]);\n            this.state.seatsbooked = this.state.seatsbooked.filter(function (n) {\n              return n != parseInt(text);\n            });\n          }\n        }\n      }\n\n      console.log(this.state);\n    };\n\n    this.onreserved = x => {\n      var y = this.state.reserved;\n      this.setState({\n        reserved: x + y\n      });\n    };\n\n    this.state = {\n      reserved: 0,\n      seatsfilled: [],\n      seatsbooked: []\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3001/BookedSeats', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        traveldate: this.props.seldate,\n        busregnno: this.props.bus.BusRegnNo\n      })\n    }).then(res => res.json()).then(data => {\n      this.setState({\n        seatsfilled: JSON.parse(data)\n      });\n    }).then(xyz => {\n      console.log(this.state);\n    }).catch(err => {\n      console.log(err);\n    }); // // bus seldate routeid\n    // console.log(this.props.seldate);\n    // console.log(this.props.bus.BusRegnNo);\n  }\n\n  render() {\n    var seatrow = [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10], [11, 12, 13, 14, 15], [16, 17, 18, 19, 20], [21, 22, 23, 24, 25], [26, 27, 28, 29, 30], [31, 32, 33, 34, 35], [36, 37, 38, 39, 40]];\n    return React.createElement(\"div\", {\n      className: \"wraps pa2 center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Headdiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"face pa3 ba b--green bg-lightest-blue\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Book Seats\")), React.createElement(\"div\", {\n      className: \"Content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(ScrollPanel, {\n      style: {\n        width: '400px',\n        height: 'auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"rowC\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(SeatRow, {\n      filled: this.state.seatsfilled,\n      seatrow: seatrow[0],\n      change: this.pay,\n      reserve: this.onreserved,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(SeatRow, {\n      filled: this.state.seatsfilled,\n      seatrow: seatrow[1],\n      change: this.pay,\n      reserve: this.onreserved,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(SeatRow, {\n      filled: this.state.seatsfilled,\n      seatrow: seatrow[2],\n      change: this.pay,\n      reserve: this.onreserved,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(SeatRow, {\n      filled: this.state.seatsfilled,\n      seatrow: seatrow[3],\n      change: this.pay,\n      reserve: this.onreserved,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(SeatRow, {\n      filled: this.state.seatsfilled,\n      seatrow: seatrow[4],\n      change: this.pay,\n      reserve: this.onreserved,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(SeatRow, {\n      filled: this.state.seatsfilled,\n      seatrow: seatrow[5],\n      change: this.pay,\n      reserve: this.onreserved,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(SeatRow, {\n      filled: this.state.seatsfilled,\n      seatrow: seatrow[6],\n      change: this.pay,\n      reserve: this.onreserved,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(SeatRow, {\n      filled: this.state.seatsfilled,\n      seatrow: seatrow[7],\n      change: this.pay,\n      reserve: this.onreserved,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"booking-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"legend\",\n      className: \"seatCharts-legend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"seatCharts-legendList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"seatCharts-legendItem\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"seatCharts-seat seatCharts-cell booked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"seatCharts-legendDescription\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Already Booked\")), React.createElement(\"li\", {\n      className: \"seatCharts-legendItem\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"seatCharts-seat seatCharts-cell avail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"seatCharts-legendDescription\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"Available\")))), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \" Selected Seats (\", React.createElement(\"span\", {\n      id: \"counter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, this.state.reserved), \"):\"), React.createElement(\"ul\", {\n      id: \"mylist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }), \"Total: \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"\\u20B9\", React.createElement(\"span\", {\n      id: \"total\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"(\", this.state.reserved * 300, \")\")), React.createElement(\"button\", {\n      className: \"checkout-button\",\n      onClick: this.handleBooking1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Pay Now\"))))));\n  }\n\n}\n\nexport default Seat;","map":{"version":3,"sources":["/home/arpit/Project_DBMS/Voice-based-Transport-Enquiry-System/voiceenquirysystem/src/Components/Seat/Seat.js"],"names":["React","Component","tachyons","ScrollPanel","SeatRow","Seat","constructor","props","handleBooking1","handleBooking","event","console","log","state","seatsbooked","length","alert","fetch","method","headers","body","JSON","stringify","traveldate","seldate","busregnno","bus","BusRegnNo","starttime","StartTime","routeid","RouteID","driverid","DriverID","then","res","json","data","setState","response","parse","x","error","setPNR","pnr","setbooked","response2","response3","onRouteChange","pay","text","op","toString","ul","document","getElementById","li","createElement","appendChild","createTextNode","includes","parseInt","push","childNodes","textContent","removeChild","filter","n","onreserved","y","reserved","seatsfilled","componentDidMount","xyz","catch","err","render","seatrow","width","height"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport tachyons from 'tachyons';\nimport './Seat.css';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport {ScrollPanel} from 'primereact/scrollpanel';\nimport SeatRow from './SeatRow/SeatRow';\n\nclass Seat extends Component {\n\nconstructor(props)\n{\n\tsuper(props);\n\tthis.state={\n\t\treserved:0,\n\t\tseatsfilled:[],\n\t\tseatsbooked:[]\n\t}\n}\n\n \n    componentDidMount() {\n         fetch('http://localhost:3001/BookedSeats',{\n\t\t      method:'post',\n\t\t      headers:{'Content-Type':'application/json'},\n\t\t      body:JSON.stringify({\n\t\t      \ttraveldate:this.props.seldate,\n\t\t      \tbusregnno:this.props.bus.BusRegnNo\n\t\t      })\n      })\n        .then(res=> res.json())\n        .then(data=>{this.setState({seatsfilled:JSON.parse(data)})})\n        .then(xyz=>{console.log(this.state)})\n        .catch((err)=>{console.log(err);})\n// // bus seldate routeid\n// console.log(this.props.seldate);\n// console.log(this.props.bus.BusRegnNo);\n    }\n\nhandleBooking1=()=>\n{\n\tthis.handleBooking();\n        \n}\n\n\nhandleBooking=(event)=>{\n\tconsole.log(this.state)\n\n\tif(this.state.seatsbooked.length==0)\n\t{\n\t\talert(\"Book seat to continue\")\n\t}\n\telse\n\t{\nfetch('http://localhost:3001/Tickets',{\nmethod:'post',\nheaders:{'Content-Type':'application/json'},\nbody:JSON.stringify({\ntraveldate:this.props.seldate,\nbusregnno:this.props.bus.BusRegnNo,\nseatsbooked:this.state.seatsbooked,\nstarttime:this.props.bus.StartTime,\nrouteid:this.props.bus.RouteID,\ndriverid:this.props.bus.DriverID\n})\n})\n.then(res=> res.json())\n.then(data=>{this.setState({response:JSON.parse(data)},function(){console.log(this.state);console.log(\"NOOO\")})})\n.then(x=>{\n\t\tif(this.state.response.error===null)\n\t\t{ \n\t\tthis.props.setPNR(this.state.response.pnr);\n\t\tthis.props.setbooked(this.state.seatsbooked);\n\t\tfetch('http://localhost:3001/SeatsBooking',{\n\t\tmethod:'post',\n\t\theaders:{'Content-Type':'application/json'},\n\t\tbody:JSON.stringify({\n\t\tpnr:this.state.response.pnr,\n\t\ttraveldate:this.props.seldate,\n\t\tbusregnno:this.props.bus.BusRegnNo,\n\t\tseatsbooked:this.state.seatsbooked,\n\t\tstarttime:this.props.bus.StartTime,\n\t\trouteid:this.props.bus.RouteID,\n\t\tdriverid:this.props.bus.DriverID\n\t\t})\n\t\t})\n\t\t.then(res=> res.json())\n\t\t.then(data=>{this.setState({response2:JSON.parse(data)})})\n\t\t.then(x=>{\n\t\tif(this.state.response2.error===null)\n\t\t{ \n\t\tconsole.log(\"Entered into SeatsBooked\")\n\t\tfetch('http://localhost:3001/Through',{\n\t\tmethod:'post',\n\t\theaders:{'Content-Type':'application/json'},\n\t\tbody:JSON.stringify({\n\t\tpnr:this.state.response.pnr,\n\t\ttraveldate:this.props.seldate,\n\t\tbusregnno:this.props.bus.BusRegnNo,\n\t\tseatsbooked:this.state.seatsbooked,\n\t\tstarttime:this.props.bus.StartTime,\n\t\trouteid:this.props.bus.RouteID,\n\t\tdriverid:this.props.bus.DriverID\n\t\t})\n\t\t})\n\t\t.then(res=> res.json())\n\t\t.then(data=>{this.setState({response3:JSON.parse(data)})})\n\t\t.then(x=>{\n\t\tif(this.state.response3.error===null)\n\t\t{ \n\t\tconsole.log(\"Entered into Through\")\n\t\talert(\"Succesfully Booked!!!\")\n\t\tthis.props.onRouteChange('testing');\n\n\n\t\t}\n\t\telse\n\t\talert(\"Error inserting. Please follow all restrictions:\"+JSON.stringify(this.state.response.error));\n\t\t})\n\n\t\t}\n\t\telse\n\t\talert(\"Error inserting. Please follow all restrictions:\"+JSON.stringify(this.state.response.error));\n\t\t})\n\n\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\talert(\"Error inserting. Please follow all restrictions:\"+JSON.stringify(this.state.response.error));\n\t\t\t\t\t\t\t\t})\n\n\t\t\t}\n\t\t\t\n\n\n\n}\n\n\npay=(text,op)=>\n{\t\n\t\ttext=text.toString(10);\n\t\t\n\n\t\tlet ul = document.getElementById('mylist');\n        if(op==='1')\n    {    let li = document.createElement('li');\n        li.appendChild(document.createTextNode(text));\n        this.state.seatsbooked.includes(parseInt(text))?    console.log(\"1\"):this.state.seatsbooked.push(parseInt(text));\n        ul.appendChild(li);\n    }\n    \telse\n    {\n    \t\n    \tfor(var x=0; x<ul.childNodes.length;x++)\n    \t{\n    \t\t\n    \t\tif(ul.childNodes[x].textContent===text)\n    \t\t\t{\n    \t\t\t\tul.removeChild(ul.childNodes[x]);\t\t\n    \t\t\t\tthis.state.seatsbooked=this.state.seatsbooked.filter( function(n)\n    \t\t\t\t\t{\n    \t\t\t\t\t return n!=(parseInt(text)) \n    \t\t\t\t\t})\n    \t\t\t\t\n    \t\t\t}\n    \t}\n    \t\n    }\n    console.log(this.state)\n}\n\nonreserved=(x)=>\n{\n\tvar y=this.state.reserved;\n\tthis.setState({reserved:(x+y)});\n}\n\nrender()\n{\n\n\tvar seatrow=[\n\t\t\t[1,2,3,4,5],\n\t\t\t[6,7,8,9,10],\n\t\t\t[11,12,13,14,15],\n\t\t\t[16,17,18,19,20],\n\t\t\t[21,22,23,24,25],\n\t\t\t[26,27,28,29,30],\n\t\t\t[31,32,33,34,35],\n\t\t\t[36,37,38,39,40]\n\t\t\t];\n\n\treturn(\n\t\t\t<div className='wraps pa2 center'>\n\n\t\t\t  <div className='Headdiv'>\n\t\t\t        <h3 className='face pa3 ba b--green bg-lightest-blue'>Book Seats</h3>\n\t\t\t          </div>\n\n\t\t\t          <div className='Content'>\n\t\t\t\t\t\t <ScrollPanel  style={{width: '400px', height: 'auto'}}>\t\t\t\t\t\t\t  \t            \n\t\t\t\t\t\t\t\t<div className='rowC'>\n\t\t\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t\t<SeatRow filled={this.state.seatsfilled} seatrow={seatrow[0]} change={this.pay} reserve={this.onreserved}/>\n\t\t\t\t\t\t \t\t<SeatRow filled={this.state.seatsfilled} seatrow={seatrow[1]} change={this.pay} reserve={this.onreserved}/>\n\t\t\t\t\t\t  \t\t<SeatRow filled={this.state.seatsfilled} seatrow={seatrow[2]} change={this.pay} reserve={this.onreserved}/>\n\t\t\t\t\t\t \t\t<SeatRow filled={this.state.seatsfilled} seatrow={seatrow[3]} change={this.pay} reserve={this.onreserved}/>\n\t\t\t\t\t\t\t\t<SeatRow filled={this.state.seatsfilled} seatrow={seatrow[4]} change={this.pay} reserve={this.onreserved}/>\n\t\t\t\t\t\t \t\t<SeatRow filled={this.state.seatsfilled} seatrow={seatrow[5]} change={this.pay} reserve={this.onreserved}/>\n\t\t\t\t\t\t  \t\t<SeatRow filled={this.state.seatsfilled} seatrow={seatrow[6]} change={this.pay} reserve={this.onreserved}/>\n\t\t\t\t\t\t \t\t<SeatRow filled={this.state.seatsfilled} seatrow={seatrow[7]} change={this.pay} reserve={this.onreserved}/>\n\t\t\t\t\t\t  \t\t</div>\n\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t<div className=\"booking-details\">\n\t\t\t\t\t\t\t\t\t\t<div id=\"legend\" className=\"seatCharts-legend\">\n\t\t\t\t\t\t\t\t\t\t\t<ul className=\"seatCharts-legendList\">\n\t\t\t\t\t\t\t\t\t\t\t\t<li className=\"seatCharts-legendItem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"seatCharts-seat seatCharts-cell booked\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"seatCharts-legendDescription\">Already Booked</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li className=\"seatCharts-legendItem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"seatCharts-seat seatCharts-cell avail\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"seatCharts-legendDescription\">Available</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<h3> Selected Seats (<span id=\"counter\">{this.state.reserved}</span>):</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul id=\"mylist\">\n\t\t\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tTotal: <b>â‚¹<span id=\"total\">({this.state.reserved*300})</span></b>\n\n\t\t\t\t\t\t\t\t\t\t<button className=\"checkout-button\" onClick={this.handleBooking1} >Pay Now</button>\n\t\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t  \t\t</div>\n\t\t\t\t\t\t  \t\t\n\t\t\t\t\t\t</ScrollPanel>\n\t\t\t\t\t  </div>\n\t\t\t  </div>\n\n\n\n\n\t\t);\n}\n\n}\n\n\n\nexport default Seat;\n"]},"metadata":{},"sourceType":"module"}